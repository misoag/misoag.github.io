<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen">
</head>
<body>
    <div class="entry"> 
 <ul> 
  <li><strong><a href="410.html#HideTestIndicators">HideTestIndicators()</a></strong> – 隐藏测试指标 </li> 
  <li><strong><a href="410.html#Period">Period()</a></strong> – 获取图表时段 </li> 
  <li><strong><a href="410.html#RefreshRates">RefreshRates()</a></strong> – 刷新数据 </li> 
  <li><strong><a href="410.html#Symbol">Symbol()</a></strong> – 获取图表货币对名称 </li> 
  <li><strong><a href="410.html#WindowBarsPerChart">WindowBarsPerChart()</a></strong> – 获取图表中柱体总数 </li> 
  <li><strong><a href="410.html#WindowExpertName">WindowExpertName()</a></strong> – 获取图表上程序名称 </li> 
  <li><strong><a href="410.html#WindowFind">WindowFind()</a></strong> – 搜索图表上指标 </li> 
  <li><strong><a href="410.html#WindowFirstVisibleBar">WindowFirstVisibleBar()</a></strong> – 获取图表上第一个显示的柱体 </li> 
  <li><strong><a href="410.html#WindowHandle">WindowHandle()</a></strong> – 获取图表句柄 </li> 
  <li><strong><a href="410.html#WindowIsVisible">WindowIsVisible()</a></strong> – 图表是否可见 </li> 
  <li><strong><a href="#WindowOnDropped">WindowOnDropped()</a></strong> – 获取窗口索引 </li> 
  <li><strong><a href="#WindowPriceMax">WindowPriceMax()</a></strong> – 获取窗口纵坐标刻度最大值 </li> 
  <li><strong><a href="#WindowPriceMin">WindowPriceMin()</a></strong> – 获取窗口纵坐标刻度最小值 </li> 
  <li><strong><a href="#WindowPriceOnDropped">WindowPriceOnDropped()</a></strong> – 获取下滑价格 </li> 
  <li><strong><a href="#WindowRedraw">WindowRedraw()</a></strong> – 重绘当前图表 </li> 
  <li><strong><a href="#WindowScreenShot">WindowScreenShot()</a></strong> – 窗口图表快照 </li> 
  <li><strong><a href="#WindowTimeOnDropped">WindowTimeOnDropped()</a></strong> – 价格下滑时间 </li> 
  <li><strong><a href="#WindowsTotal">WindowsTotal()</a></strong> – 获取指标窗口数 </li> 
  <li><strong><a href="#WindowXOnDropped">WindowXOnDropped()</a></strong> – x轴下滑像素值 </li> 
  <li><strong><a href="#WindowYOnDropped">WindowYOnDropped()</a></strong> – y轴下滑像素值 </li> 
 </ul> 
 <p>&nbsp;</p> 
 <h2><a name="WindowOnDropped"></a>WindowOnDropped() – 获取窗口索引</h2> 
 <pre class="brush: mql4; toolbar: false;">int WindowOnDropped()</pre> 
 <p>返回应用了智能交易、自定义指标和脚本的窗口索引。只有智能交易、自定义指标或脚本被鼠标拖到窗口上，这个值才是有效的。</p> 
 <p>注：对于那些被初始化函数调用的自定义指标(通过init()函数调用)，此索引没有被定义。</p> 
 <p>返回的索引就是运行自定义指标的窗口编号(0一图表主菜单，指标子窗口从1开始编号)。在自定义指标运行期间，它可以自己创建新的子窗口，并且这个子窗口的编号和那些真正用鼠标把指标拖过去应用的窗口是不同的。</p> 
 <p>参见 <a href="#WindowXOnDropped">WindowXOnDropped()</a>,&nbsp; <a href="#WindowYOnDropped">WindowYOnDropped()</a></p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">if(WindowOnDropped()!=0)
  {
   Print("指标'MyIndicator'必须应用到主图表窗口!");
   return(false);
  }</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowPriceMax"></a>WindowPriceMax() – 获取窗口纵坐标刻度最大值</h2> 
 <pre class="brush: mql4; toolbar: false;">double WindowPriceMax(void index)</pre> 
 <p>返回当前图表指定的子窗口纵坐标刻度的最大值(0-图表主窗口，指标子窗口编号从1开始)。如果子窗口索引没有指定，将返回主图表窗口价格刻度的最大值。</p> 
 <p>参见<a href="#WindowPriceMin">WindowPriceMin()</a>, <a href="#WindowFirstVisibleBar">WindowFirstVisibleBar()</a>, <a href="#WindowBarsPerChart">WindowBarsPerChart()</a>。</p> 
 <p>参数:</p> 
 <pre>index - 图表子窗口索引(0-图表主窗口)。</pre> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">double   top=WindowPriceMax();
double   bottom=WindowPriceMin();
datetime left=Time[WindowFirstVisibleBar()];
int      right_bound=WindowFirstVisibleBar()-WindowBarsPerChart();
if(right_bound&lt;0) right_bound=0;
datetime right=Time[right_bound]+Period()*60;
//----
ObjectCreate("Padding_rect",OBJ_RECTANGLE,0,left,top,right,bottom);
ObjectSet("Padding_rect",OBJPROP_BACK,true);
ObjectSet("Padding_rect",OBJPROP_COLOR,Blue);
WindowRedraw();</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowPriceMin"></a>WindowPriceMin() – 获取窗口纵坐标刻度最小值</h2> 
 <pre class="brush: mql4; toolbar: false;">double WindowPriceMin(void index)</pre> 
 <p>返回当前图表指定的子窗口纵坐标刻度的最小值(0-图表主窗口，指标子窗口编号从1开始)。如果子窗口索引没有指定，将返回主图表窗口价格刻度的最小值。</p> 
 <p>参见 <a href="#WindowPriceMax">WindowPriceMax()</a>, <a href="#WindowFirstVisibleBar">WindowFirstVisibleBar()</a>, <a href="#WindowBarsPerChart">WindowBarsPerChart()</a>。</p> 
 <p>参数:</p> 
 <pre>index - 图表子窗口索引(0-图表主窗口)。</pre> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">double   top=WindowPriceMax();
double   bottom=WindowPriceMin();
datetime left=Time[WindowFirstVisibleBar()];
int      right_bound=WindowFirstVisibleBar()-WindowBarsPerChart();
if(right_bound&lt;0) right_bound=0;
datetime right=Time[right_bound]+Period()*60;
//----
ObjectCreate("Padding_rect",OBJ_RECTANGLE,0,left,top,right,bottom);
ObjectSet("Padding_rect",OBJPROP_BACK,true);
ObjectSet("Padding_rect",OBJPROP_COLOR,Blue);
WindowRedraw();</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowPriceOnDropped"></a>WindowPriceOnDropped() – 获取下滑价格</h2> 
 <pre class="brush: mql4; toolbar: false;">double WindowPriceOnDropped()</pre> 
 <p>返回图表点的智能交易或脚本价格下滑价格。只有智能交易、自定义指标或脚本被鼠标拖到窗口上，这个值才是有效的。</p> 
 <p>注:对于自定义指标，这个值是不确定的。</p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">  double   drop_price=WindowPriceOnDropped();
  datetime drop_time=WindowTimeOnDropped();
  //---- 可能未指定 (zero)
  if(drop_time&gt;0)
    {
     ObjectCreate("价格下滑水平", OBJ_HLINE, 0, drop_price);
     ObjectCreate("下滑时间", OBJ_VLINE, 0, drop_time);
    }</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowRedraw"></a>WindowRedraw() – 重绘当前图表</h2> 
 <pre class="brush: mql4; toolbar: false;">void WindowRedraw()</pre> 
 <p>强制重画当前图表。在货币对属性改变之后，通常会应用本函数。</p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">  //---- 设置货币对新属性
  ObjectMove(object_name1, 0, Time[index], price);
  ObjectSet(object_name1, OBJPROP_ANGLE, angle*2);
  ObjectSet(object_name1, OBJPROP_FONTSIZE, fontsize);
  ObjectSet(line_name, OBJPROP_TIME2, time2);
  ObjectSet(line_name, OBJPROP_ANGLE, line_angle);
  //---- 现在重画
  WindowRedraw();</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowScreenShot"></a>WindowScreenShot() – 窗口图表快照</h2> 
 <pre class="brush: mql4; toolbar: false;">
bool WindowScreenShot(string filename, int size_x,
                      int size_y, void start_bar,
                      void chart_scale, void chart_mode)</pre> 
 <p>以GIF文件形式保存当前图表图像。如果失败，返回FALSE，想要得到详细的错误信息，请调用 GetLastError() 函数。</p> 
 <p>屏幕快照保存在<em>terminal_dir\experts\files</em> (<em>terminal_dir\tester\files</em> 测试情况下)目录或其子目录中。</p> 
 <p>参数:</p> 
 <pre>filename    - 保存屏幕快照的文件名称。
size_x      - 屏幕宽度(像素)。
size_y      - 屏幕高度(像素)。
start_bar   - 屏幕快照中第一个可见柱子。如果价格值设定为0，当前第个可见柱子将被除去。如果价格值未设置或为负值，图表尾部图像将会生成。
chart_scale - 屏幕快照图表的水平刻度。范围可以从0到5，如果没有值或设为负值，将直接使用当前图表刻度。
chart_mode  - 图表显示模式。可以采用下列值:
              CHART_BAR   (以柱体形式显示)
              CHART_CANDLE (以K线形式显示)
              CHART_LINE   (以收盘价线显示)。
                如果没有值或设为负值，图表会以当前模式显示。 </pre> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">  int lasterror=0;
  //----测试模式下平仓
  if(IsTesting() &amp;&amp; ExtTradesCounter&lt;TradesTotal())
    {
     //---- 使用 WindowScreenShot 进行检测
     if(!WindowScreenShot("shots\\tester"+ExtShotsCounter+".gif",640,480))
        lasterror=GetLastError();
     else ExtShotsCounter++;
     ExtTradesCounter=TradesTotal();
    }</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowTimeOnDropped"></a>WindowTimeOnDropped() – 价格下滑时间</h2> 
 <pre class="brush: mql4; toolbar: false;">datetime WindowTimeOnDropped()</pre> 
 <p>返回图表点的智能交易或脚本价格下滑时间部分。只有智能交易、自定义指标或脚本被鼠标拖到窗口上，这个值才是有效的。</p> 
 <p>注:对于自定义指标，这个值是不确定的。</p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">  double   drop_price=WindowPriceOnDropped();
  datetime drop_time=WindowTimeOnDropped();
  //---- 可能未指定 (zero)
  if(drop_time&gt;0)
    {
     ObjectCreate("Dropped price line", OBJ_HLINE, 0, drop_price);
     ObjectCreate("Dropped time line", OBJ_VLINE, 0, drop_time);
    }</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowsTotal"></a>WindowsTotal() – 获取指标窗口数</h2> 
 <pre class="brush: mql4; toolbar: false;">int WindowsTotal()</pre> 
 <p>返回在图表中指标窗口数(包括主图表)。</p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">Print("窗口数 = ", WindowsTotal()); </pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowXOnDropped"></a>WindowXOnDropped() – x轴下滑像素值</h2> 
 <pre class="brush: mql4; toolbar: false;">int WindowXOnDropped()</pre> 
 <p>在图表窗口的客户区域点，应用了智能交易或脚本，当鼠标拖动时，返回X轴上的下滑点像素值。当以映像点x轴智能交易或脚本下滑时，返回价格值。</p> 
 <p>只有在智能交易或脚本应用鼠标技术(”拖曳”)的情况下，这个值是准确的。</p> 
 <p>参见<a href="#WindowYOnDropped">WindowYOnDropped()</a>, <a href="#WindowOnDropped">WindowOnDropped()</a></p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">Print("智能交易下滑点 x=",WindowXOnDropped()," y=",WindowYOnDropped());</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 
 <h2><a name="WindowYOnDropped"></a>WindowYOnDropped() – y轴下滑像素值</h2> 
 <pre class="brush: mql4; toolbar: false;">int WindowYOnDropped()</pre> 
 <p>在图表窗口的客户区域点，应用了智能交易或脚本，当鼠标拖动时，返回Y轴上的下滑点像素值。当以映像点Y轴智能交易或脚本下滑时，返回价格值。</p> 
 <p>只有在智能交易或脚本应用鼠标技术(”拖曳”)的情况下，这个值是准确的。</p> 
 <p>参见 <a href="#WindowXOnDropped">WindowXOnDropped()</a>, <a href="#WindowPriceOnDropped">WindowPriceOnDropped()</a>, <a href="#WindowOnDropped">WindowOnDropped()</a></p> 
 <p>示例:</p> 
 <pre class="brush: mql4; toolbar: false;">Print("智能交易下滑点 x=",WindowXOnDropped()," y=",WindowYOnDropped());</pre> 
 <div class="divider top-of-page">
  <a title="Top of Page" href="#top">Back to Top</a>
 </div> 本文地址：
 <a href="411.html" rel="bookmark"><b>411.html</b></a> 
</div>
</body>
</html>