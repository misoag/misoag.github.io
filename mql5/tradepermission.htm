<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Style-Type" content="text/css">

<title>Trade Permission</title>
<meta name="keywords" content="">
<link rel="stylesheet" href="files/helpindex.css" type="text/css">
<link rel="stylesheet" href="default.css" type="text/css">

<script type="text/JavaScript" src="files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "tradepermission.htm";
</script>

</head>
<body style=
"background-color:#FFFFFF; font-family:'Trebuchet MS',Tahoma,Arial,Helvetica,sans-serif; margin:0px;"><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"index.html?page=tradepermission.htm\">here</a> to show toolbars of the Web Online Help System: <a href=\"index.html?page=tradepermission.htm\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script>
<!-- !chm2web! -->


<table width="100%" border="0" cellpadding="0" cellspacing="0"
style=
"margin:0; background: #7F90A5 url('gradient_header.png') repeat-x left top; border-bottom: 3px solid #DBE0E5;">
<tr>
<td valign="middle">
<table style="margin: 10px 0" width="100%" border="0" cellspacing=
"0" cellpadding="0">
<tr valign="middle">
<td class="nav"><a class="h_m" href="index.htm">MQL5 Reference</a>
/ <a class="h_m" href="runtime.htm">MQL5 programs</a> / Trade
Permission</td>
<td align="right" style="white-space: nowrap; padding: 0 10px;">
<a href="running.htm"><img style="vertical-align:middle;" src=
"previous.png" alt="Back" width="27" height="27" border=
"0"></a><a href="event_fire.htm"><img style=
"vertical-align:middle;margin-left: 7px;" src="next.png" alt=
"Forward" width="27" height="27" border="0"></a>
</td>
</tr>
</table>
</td>
</tr>
</table>

<div id="help">
<p class="p_H1"><span class="f_H1">Trade Permission</span>
</p>

<p class="p_H2"><span class="f_H2">Trade Automation</span>
</p>

<p class="p_Text"><span class="f_Text">MQL5 language provides a
special group of <a href="trading.htm" class="topiclink">trade
functions</a> designed for developing automated trading systems.
Programs developed for automated trading with no human intervention
are called Expert Advisors or trading robots. In order to create an
Expert Advisor in MetaEditor, launch MQL5 Wizard and select one of
the two options:</span>
</p>

<ul class="help_list" style=
"text-align: justify; text-indent: 0px; padding: 0px 0px 0px 17px; margin: 3px 17px 3px 17px;">
<li><span class="f_li">Expert Advisor (template)  allows you to
create a template with ready-made <a href="events.htm" class=
"topiclink">event handling functions</a> that should be
supplemented with all necessary functionality by means of
programming.</span>
</li>

<li><span class="f_li">Expert Advisor (generate)  allows you to
<a href="https://www.mql5.com/en/articles/275" target="_blank"
class="weblink" title="MQL5 Wizard: New Version">develop a
full-fledged trading robot</a> simply by selecting the necessary
modules: trading signals module, money management module and
trailing stop module.</span>
</li>
</ul>

<p class="p_Text" style="text-align: center;"><img class="help"
src="mql5_wizard.png" width="532" height="399" alt="MQL5_Wizard"
style=
"margin:0px auto 0px auto;width:532px;height:399px;border:none">
</p>

<p class="p_Text"><span class="f_Text">Trading functions can work
only in Expert Advisors and scripts. Trading is not allowed for
indicators.</span>
</p>

<p class="p_H2"><span class="f_H2">Checking for Permission to
Perform Automated Trading</span>
</p>

<p class="p_Text"><span class="f_Text">In order to develop a
reliable Expert Advisor capable of working without human
intervention, it is necessary to arrange a set of important checks.
First, we should programmatically check if trading is allowed at
all. This is a basic check that is indispensable when developing
any automated system.</span>
</p>

<p class="p_H3"><span class="f_H3">Checking for permission to
perform automated trading in the terminal</span>
</p>

<p class="p_Text"><span class="f_Text">The terminal settings
provide you with an ability to allow or forbid automated trading
for all programs.</span>
</p>

<p class="p_Text" style="text-align: center;"><img class="help"
src="terminal_trade_allowed.png" width="591" height="375" alt=
"TERMINAL_TRADE_ALLOWED" style=
"margin:0px auto 0px auto;width:591px;height:375px;border:none">
</p>

<p class="p_Text"><span class="f_Text">You can switch automated
trading option right on the terminal's Standard panel:</span>
</p>

<ul class="help_list" style=
"text-align: justify; text-indent: 0px; padding: 0px 0px 0px 17px; margin: 3px 17px 3px 17px;">
<li><img class="help" src="autotrading_enabled.png" width="101"
height="25" alt="AutoTrading_enabled" style=
"width:101px;height:25px;border:none"><span class="f_li">
automated trading enabled, trading functions in launched
applications are allowed for use.</span>
</li>

<li><img class="help" src="autotrading_disabled.png" width="101"
height="25" alt="AutoTrading_disabled" style=
"width:101px;height:25px;border:none"> <span class="f_li">
automated trading disabled,</span> <span class="f_Text">running
applications are unable to execute trading functions.</span></li>
</ul>

<p class="p_Text"><span class="f_Text">Sample check:</span>
</p>

<div style=
"text-align: left; text-indent: 0px; border-color: #b3b3b3; border-style: solid; border-width: 1px; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
<table cellspacing="0" cellpadding="3" border="0" style=
"text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;">
<p class="p_CodeExample"><span class="f_CodeExample" style=
"color: #0000ff;">if</span><span class=
"f_CodeExample">&nbsp;(!</span><span class="f_CodeExample" style=
"color: #0000ff;">TerminalInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">TERMINAL_TRADE_ALLOWED</span><span class=
"f_CodeExample">))&nbsp;</span><br>
<span class="f_CodeExample" style=
"color: #0000ff;">&nbsp;&nbsp;&nbsp;Alert</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #008080;">"Check&nbsp;if&nbsp;automated&nbsp;trading&nbsp;is&nbsp;allowed&nbsp;in&nbsp;the&nbsp;terminal&nbsp;settings!"</span><span class="f_CodeExample">);</span>
</p>
</td>
</tr>
</table>
</div>

<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span>
</p>

<p class="p_H3"><span class="f_H3">Checking if trading is allowed
for a certain running Expert Advisor/script</span>
</p>

<p class="p_Text"><span class="f_Text">You can allow or forbid
automated trading for a certain program when launching it. To do
this, use the special check box in the program properties.</span>
</p>

<p class="p_Text" style="text-align: center;"><img class="help"
src="mql_trade_allowed.png" width="619" height="352" alt=
"MQL_TRADE_ALLOWED" style=
"margin:0px auto 0px auto;width:619px;height:352px;border:none">
</p>

<p class="p_Text"><span class="f_Text">Sample check:</span>
</p>

<div style=
"text-align: left; text-indent: 0px; border-color: #b3b3b3; border-style: solid; border-width: 1px; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
<table cellspacing="0" cellpadding="3" border="0" style=
"text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;">
<p class="p_CodeExample"><span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class=
"f_CodeExample" style="color: #0000ff;">if</span><span class=
"f_CodeExample">(!</span><span class="f_CodeExample" style=
"color: #0000ff;">TerminalInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">TERMINAL_TRADE_ALLOWED</span><span class=
"f_CodeExample">))</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style="color: #0000ff;">Alert</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #008080;">"Check&nbsp;if&nbsp;automated&nbsp;trading&nbsp;is&nbsp;allowed&nbsp;in&nbsp;the&nbsp;terminal&nbsp;settings!"</span><span class="f_CodeExample">);</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class=
"f_CodeExample" style="color: #0000ff;">else</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style="color: #0000ff;">if</span><span class=
"f_CodeExample">(!</span><span class="f_CodeExample" style=
"color: #0000ff;">MQLInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">MQL_TRADE_ALLOWED</span><span class=
"f_CodeExample">))</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style="color: #0000ff;">Alert</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #008080;">"Automated&nbsp;trading&nbsp;is&nbsp;forbidden&nbsp;in&nbsp;the&nbsp;program&nbsp;settings&nbsp;for&nbsp;"</span><span class="f_CodeExample">,</span><span class="f_CodeExample"
style="color: #0000ff;">__FILE__</span><span class=
"f_CodeExample">);</span><br>
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span>
</p>
</td>
</tr>
</table>
</div>

<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span>
</p>

<p class="p_H3"><span class="f_H3">Checking if trading is allowed
for any Expert Advisors/scripts for the current account</span>
</p>

<p class="p_Text"><span class="f_Text">Automated trading can be
disabled at the trade server side. Sample check:</span>
</p>

<div style=
"text-align: left; text-indent: 0px; border-color: #b3b3b3; border-style: solid; border-width: 1px; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
<table cellspacing="0" cellpadding="3" border="0" style=
"text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;">
<p class="p_CodeExample"><span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class=
"f_CodeExample" style="color: #0000ff;">if</span><span class=
"f_CodeExample">(!</span><span class="f_CodeExample" style=
"color: #0000ff;">AccountInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">ACCOUNT_TRADE_EXPERT</span><span class=
"f_CodeExample">))</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style="color: #0000ff;">Alert</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #008080;">"Automated&nbsp;trading&nbsp;is&nbsp;forbidden&nbsp;for&nbsp;the&nbsp;account&nbsp;"</span><span class="f_CodeExample">,</span><span class="f_CodeExample"
style="color: #0000ff;">AccountInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">ACCOUNT_LOGIN</span><span class=
"f_CodeExample">),</span><br>
<span class="f_CodeExample" style=
"color: #008080;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;at&nbsp;the&nbsp;trade&nbsp;server&nbsp;side"</span><span class="f_CodeExample">);</span>
</p>
</td>
</tr>
</table>
</div>

<p class="p_Text"><span class="f_Text">If automated trading is
disabled for a trading account, trading operations of Expert
Advisors/scripts are not executed.</span>
</p>

<p class="p_H3"><span class="f_H3">Checking if trading is allowed
for the current account</span>
</p>

<p class="p_Text"><span class="f_Text">In some cases, any trading
operations are disabled for a certain trading account  neither
manual nor automated trading can be performed. Sample check when an
investor password has been used to connect to a trading
account:</span>
</p>

<div style=
"text-align: left; text-indent: 0px; border-color: #b3b3b3; border-style: solid; border-width: 1px; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
<table cellspacing="0" cellpadding="3" border="0" style=
"text-align: justify;border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; padding:3px;">
<p class="p_CodeExample"><span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;</span><span class=
"f_CodeExample" style="color: #0000ff;">if</span><span class=
"f_CodeExample">(!</span><span class="f_CodeExample" style=
"color: #0000ff;">AccountInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">ACCOUNT_TRADE_ALLOWED</span><span class=
"f_CodeExample">))</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style="color: #0000ff;">Comment</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #008080;">"Trading&nbsp;is&nbsp;forbidden&nbsp;for&nbsp;the&nbsp;account&nbsp;"</span><span class="f_CodeExample">,</span><span class="f_CodeExample"
style="color: #0000ff;">AccountInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">ACCOUNT_LOGIN</span><span class=
"f_CodeExample">),</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style=
"color: #008080;">".\n&nbsp;Perhaps&nbsp;an&nbsp;investor&nbsp;password&nbsp;has&nbsp;been&nbsp;used&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;trading&nbsp;account."</span><span class="f_CodeExample">,</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style=
"color: #008080;">"\n&nbsp;Check&nbsp;the&nbsp;terminal&nbsp;journal&nbsp;for&nbsp;the&nbsp;following&nbsp;entry:"</span><span class="f_CodeExample">,</span><br>
<span class=
"f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="f_CodeExample"
style="color: #008080;">"\n\'"</span><span class=
"f_CodeExample">,</span><span class="f_CodeExample" style=
"color: #0000ff;">AccountInfoInteger</span><span class=
"f_CodeExample">(</span><span class="f_CodeExample" style=
"color: #0000ff;">ACCOUNT_LOGIN</span><span class=
"f_CodeExample">),</span><span class="f_CodeExample" style=
"color: #008080;">"\':&nbsp;trading&nbsp;has&nbsp;been&nbsp;disabled&nbsp;-&nbsp;investor&nbsp;mode."</span><span class="f_CodeExample">);</span>
</p>
</td>
</tr>
</table>
</div>

<p class="p_Text"><span class=
"f_Text">AccountInfoInteger(ACCOUNT_TRADE_ALLOWED) may
return</span> <span class="f_Text" style=
"font-weight: bold;">false</span> <span class="f_Text">in the
following cases:</span></p>

<ul class="help_list" style=
"text-align: justify; text-indent: 0px; padding: 0px 0px 0px 17px; margin: 3px 17px 3px 17px;">
<li><span class="f_li">no connection to the trade server. That can
be checked using TerminalInfoInteger(TERMINAL_CONNECTED));</span>
</li>

<li><span class="f_li">trading account switched to read-only mode
(sent to the archive);</span>
</li>

<li><span class="f_li">trading on the account is disabled at the
trade server side;</span>
</li>

<li><span class="f_li">connection to a trading account has been
performed in Investor mode.</span>
</li>
</ul>

<p class="p_li"><span class="f_li">&nbsp;</span>
</p>

<p class="p_BoldTitles"><span class="f_BoldTitles">See also</span>
</p>

<p class="p_SeeAlso"><span class="f_SeeAlso"><a href=
"terminalstatus.htm" class="topiclink">Client Terminal
Properties</a>, <a href="accountinformation.htm" class=
"topiclink">Account Properties</a>, <a href=
"mql5_programm_info.htm" class="topiclink">Properties of a Running
MQL5 Program</a></span>
</p>
<br>
</div>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("" + chmtop.c2wtopf.pageid);
}
</script>

<!-- CHM2WEB -->
<!-- DO NOT DELETE OR MODIFY THIS CODE WITHOUT 
     WRITTEN PERMISSION OF A!K RESEARCH LABS -->
<table width="100%" cellspacing="0" cellpadding="0" 
style="margin-top: 0pt; border-collapse: collapse;"> 
<tr> <td align="right" style="background-color:white; border-top: 1px solid gray;"> 
<a href="http://chm2web.aklabs.com" target="_blank" style="font-family: sans-serif;  font-size: 11px; text-decoration: none;"><font color="gray">Converted from CHM to HTML with <b>chm2web Pro 2.85 (unicode)</b></font></a>
</td></tr></table> 
<!-- /CHM2WEB -->

</body>
</html>
